appModule.controller('bisWarehouse', function ($scope, $http, clickDown, $uibModal, $rootScope) {
    $scope.warehousefilter =
        [{name: "status", param: 1}]
    /*$scope.ctrlMenu =
     [{
     name:"删除",
     click:"delete('sm',check())"
     }, {
     name:"高级查询",
     click: "asearch()"
     }]*/
    $scope.$on('pageData', function ($event, msg) {
        $scope.warehouse = msg;
        //判断删除按钮
        $scope.check = function () {
            var flag = false;
            if ($scope.warehouse._getSelectedItems.length) {
                for (var i in $scope.warehouse._getSelectedItems()) {
                    if ($scope.warehouse._getSelectedItems()[i].status == "生效" &&
                        $scope.warehouse._getSelectedItems()[i].name == "2") flag = true;
                    else return flag = false;
                }
            }
            return flag
        }

        //删除弹框显示
        $scope.delete = function (size, fn) {
            if (fn) {
                $uibModal.open({
                    backdrop: 'static',
                    templateUrl: 'delete.html',
                    controller: function ($scope, $uibModalInstance) {
                        $scope.ok = function () {
                            console.log($scope.show);
                            $uibModalInstance.close();
                        };
                        $scope.cancel = function () {
                            $uibModalInstance.dismiss('cancel');
                        };
                    },
                    size: size,
                    resolve: {
                        data: function () {
                            console.log($scope.warehouse._getSelectedItems());
                            return $scope.warehouse._getSelectedItems("id");
                        }
                    }
                });
            }
            else return console.log("不满足操作条件");
        }
        //高级查询弹框
        $scope.asearch = function (size) {
            $uibModal.open({
                templateUrl: 'advancedSearch.html',
                controller: function ($scope, $uibModalInstance, $http) {
                    $http.post("testJson/updateWare", {}).success(function (data) {
                        $scope.obj = data;
                    })
                },
                size: size
            })
        }

        $scope.updateWarehouse = function () {
            //console.log("执行修改", $scope.warehouse.data.list._getSelectedItems("id"))
            var id = $scope.warehouse.data.list._getSelectedItems("id");
            $http.get("testJson/updateWare.json").success(function (data) {
                $scope.ware = eval(data);
                console.log($scope.ware);

            }).error(function () {
                alert("修改弹框错误")
            })
        }

        $scope.xxx = function () {
            console.log("hahaha")
        }
    })
})
appModule.controller('item',function(){

})
appModule.controller('bisWarehouseArea', function ($scope, $http, clickDown) {
    $scope.menushow = false;
    $scope.options = [
        {value: 10, name: '10'},
        {value: 20, name: '20'},
        {value: 50, name: '50'}
    ];

    $scope.execDelete = function () {
        console.log("执行删除", $scope.warehouse.data.list._getSelectedItems("id"));
    }

    $scope.updateWarehouse = function () {

        var id = $scope.warehouse.data.list._getSelectedItems("id");
        $http.get("testJson/updateWare.json").success(function (data) {
            $scope.ware = eval(data);
            console.log($scope.ware);

        }).error(function () {
            alert("修改弹框错误")
        })
    }
    $scope.clickDown = function (name, num, item, $event) {
        clickDown(name, num, item, $event);
    }
    $scope.dialog = function () {
        dialog.confirm({
            title: "删除操作",
            content: "确定删除？",
            ok: function () {
                console.log("-------------");
                return true;
            }
        });
    }

    $scope.xxx = function () {
        console.log("hahaha")
    }
})

//bisModule.controller('bisWarehouse')